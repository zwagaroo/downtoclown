
<html>
  <head>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <script type="text/javascript" src="https://www.airconsole.com/api/airconsole-1.8.0.js"></script>
    <style type="text/css">
      /* the style sheet dictates what our elements (buttons, backgrounds etc.) will look like. */
      #interact-button{
          background-image: url("button.png");
          position: absolute;
          top: 20%;
          left: 10%;
          width: 80%;
          height: 60%;
          background-size: contain;
          background-repeat: no-repeat;
      }
    </style>

    <script type="text/javascript" src="./airconsole-view-manager.js"></script>

    <script type="text/javascript">
      var airconsole;
      let viewmanager = null;
      var role;

      function App() {
          /* JavaScript / Functionality. Add functions and evens here */
          this.airconsole = new AirConsole({"orientation" : "portrait"});
          viewmanager = new AirConsoleViewManager(this.airconsole);

          this.airconsole.onMessage = function(device_id, data) {
              console.log(data);
              const msg_type = data["msg_type"];
              switch (msg_type) {
              case "roleAssignment":
                  console.log("HUH")
                  this.role = data["role_index"];
                  viewmanager.controllersShow('role-change');
              default:
                  console.log("ERRRROORRR");
              }
          };

          /*
           * Here we are adding support for mouse events manually.
           * --> WE STRONGLY ENCOURAGE YOU TO USE THE AIRCONSOLE CONTROLS LIBRARY
           * WHICH IS EVEN BETTER (BUT WE DONT WANT TO BLOAT THE CODE HERE).
           * https://github.com/AirConsole/airconsole-controls/
           *
           * DO NOT USE ONCLICK HANDLERS.
           * THEY ADD A 200MS DELAY!
           */
          if (!("ontouchstart" in document.createElement("div"))) {
              var elements = document.getElementsByTagName("*");
              for (var i = 0; i < elements.length; ++i) {
                  var element = elements[i];
                  var ontouchstart = element.getAttribute("ontouchstart");
                  if (ontouchstart) {
                      element.setAttribute("onmousedown", ontouchstart);
                  }
                  var ontouchend = element.getAttribute("ontouchend");
                  if (ontouchend) {
                      element.setAttribute("onmouseup", ontouchend);
                  }
              }
          }
      }

      // Javascript
      var message = {
          'msg_type': 'switch_state',
          'info': { 'amount': 5, 'torque': 234.8 }
      };

      App.prototype.sendMessageToScreen = function(msg) {
          console.log(message);
          this.airconsole.message(AirConsole.SCREEN, message);
      };
    </script>
  </head>
  <body onload="window.app = new App()">
    <div id="interact-button" ontouchstart="window.app.sendMessageToScreen('interact')"></div>

    <a href="Scripts/Client/card-swiper/index.html">HELLOOOO</a><br>

    <div id="role-change" class="view">
      ROLE CHANGE ROLE CHANGE
    </div>

  </body>
</html>
